<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="AccessibilityBenchmark.InteractiveMapPage"
             xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="Interactive Map"
             BackgroundColor="#F5F5F5">

    <ContentPage.Content>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- Search Bar -->
            <Grid Grid.Row="0" BackgroundColor="White" Padding="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <Entry Grid.Column="0" 
                       x:Name="SearchEntry"
                       Placeholder="Search for places..." 
                       BackgroundColor="#F5F5F5" 
                       TextColor="#333" 
                       FontSize="16" 
                       Completed="OnSearchCompleted" />

                <Button Grid.Column="1" 
                        Text="Search" 
                        BackgroundColor="#007AFF" 
                        TextColor="White" 
                        BorderRadius="8" 
                        Padding="16,12" 
                        Margin="12,0,0,0"
                        Clicked="OnSearchClicked" />
            </Grid>

            <!-- Map Type Selector -->
            <ScrollView Grid.Row="1" 
                        Orientation="Horizontal" 
                        BackgroundColor="White" 
                        Padding="16,8">
                <StackLayout Orientation="Horizontal" Spacing="8">
                    
                    <Button Text="Standard" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#666" 
                            BorderRadius="20" 
                            Padding="16,8" 
                            Clicked="OnMapTypeChanged" 
                            CommandParameter="standard" />

                    <Button Text="Satellite" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#666" 
                            BorderRadius="20" 
                            Padding="16,8" 
                            Clicked="OnMapTypeChanged" 
                            CommandParameter="satellite" />

                    <Button Text="Hybrid" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#666" 
                            BorderRadius="20" 
                            Padding="16,8" 
                            Clicked="OnMapTypeChanged" 
                            CommandParameter="hybrid" />

                    <Button Text="Terrain" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#666" 
                            BorderRadius="20" 
                            Padding="16,8" 
                            Clicked="OnMapTypeChanged" 
                            CommandParameter="terrain" />

                </StackLayout>
            </ScrollView>

            <!-- Map Area -->
            <Grid Grid.Row="2" 
                  Margin="16" 
                  BackgroundColor="#E8F4F8" 
                  Padding="16">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!-- Map View -->
                <Frame Grid.Row="0" 
                       BackgroundColor="#E8F4F8" 
                       CornerRadius="12" 
                       BorderColor="#E0E0E0" 
                       HasShadow="True">
                    <StackLayout VerticalOptions="Center" 
                                 HorizontalOptions="Center" 
                                 Spacing="8">
                        <Label Text="🗺️" FontSize="64" HorizontalOptions="Center" />
                        <Label Text="Interactive Map" 
                               FontSize="18" 
                               TextColor="#666" 
                               HorizontalOptions="Center" />
                        <Label x:Name="CoordinatesLabel" 
                               Text="37.7749, -122.4194" 
                               FontSize="14" 
                               TextColor="#999" 
                               HorizontalOptions="Center" />
                        <Label x:Name="ZoomLabel" 
                               Text="Zoom: 10" 
                               FontSize="12" 
                               TextColor="#999" 
                               HorizontalOptions="Center" />
                    </StackLayout>
                </Frame>

                <!-- Map Markers -->
                <AbsoluteLayout Grid.Row="0">
                    <!-- Sample Markers -->
                    <Button Text="📍" 
                            BackgroundColor="Transparent" 
                            TextColor="Red" 
                            FontSize="24" 
                            AbsoluteLayout.LayoutBounds="0.2, 0.3, 0.1, 0.1" 
                            AbsoluteLayout.LayoutFlags="All" 
                            Clicked="OnMarkerClicked" 
                            CommandParameter="1" />

                    <Button Text="📍" 
                            BackgroundColor="Transparent" 
                            TextColor="Teal" 
                            FontSize="24" 
                            AbsoluteLayout.LayoutBounds="0.4, 0.5, 0.1, 0.1" 
                            AbsoluteLayout.LayoutFlags="All" 
                            Clicked="OnMarkerClicked" 
                            CommandParameter="2" />

                    <Button Text="📍" 
                            BackgroundColor="Transparent" 
                            TextColor="Blue" 
                            FontSize="24" 
                            AbsoluteLayout.LayoutBounds="0.6, 0.2, 0.1, 0.1" 
                            AbsoluteLayout.LayoutFlags="All" 
                            Clicked="OnMarkerClicked" 
                            CommandParameter="3" />

                    <Button Text="📍" 
                            BackgroundColor="Transparent" 
                            TextColor="Purple" 
                            FontSize="24" 
                            AbsoluteLayout.LayoutBounds="0.8, 0.4, 0.1, 0.1" 
                            AbsoluteLayout.LayoutFlags="All" 
                            Clicked="OnMarkerClicked" 
                            CommandParameter="4" />

                    <!-- User Location Marker -->
                    <Button Text="👤" 
                            BackgroundColor="Blue" 
                            TextColor="White" 
                            FontSize="16" 
                            BorderRadius="12" 
                            WidthRequest="24" 
                            HeightRequest="24" 
                            AbsoluteLayout.LayoutBounds="0.5, 0.5, 0.05, 0.05" 
                            AbsoluteLayout.LayoutFlags="All" 
                            IsVisible="{Binding ShowUserLocation}" />
                </AbsoluteLayout>

                <!-- Map Controls -->
                <StackLayout Grid.Row="1" 
                             Orientation="Horizontal" 
                             HorizontalOptions="End" 
                             VerticalOptions="Start" 
                             Spacing="8" 
                             Margin="0,16,0,0"
                             IsVisible="{Binding ShowMapControls}">
                    
                    <Button Text="+" 
                            BackgroundColor="White" 
                            TextColor="#333" 
                            BorderRadius="20" 
                            WidthRequest="40" 
                            HeightRequest="40" 
                            Clicked="OnZoomInClicked" />

                    <Button Text="-" 
                            BackgroundColor="White" 
                            TextColor="#333" 
                            BorderRadius="20" 
                            WidthRequest="40" 
                            HeightRequest="40" 
                            Clicked="OnZoomOutClicked" />

                    <Button Text="📍" 
                            BackgroundColor="White" 
                            TextColor="#333" 
                            BorderRadius="20" 
                            WidthRequest="40" 
                            HeightRequest="40" 
                            Clicked="OnCenterMapClicked" />
                </StackLayout>
            </Grid>

            <!-- Bottom Controls -->
            <Grid Grid.Row="3" 
                  BackgroundColor="White" 
                  Padding="16,12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Button Grid.Column="0" 
                        Text="Layers" 
                        BackgroundColor="Transparent" 
                        TextColor="#333" 
                        Clicked="OnLayersClicked" />

                <Button Grid.Column="1" 
                        Text="Bookmarks" 
                        BackgroundColor="Transparent" 
                        TextColor="#333" 
                        Clicked="OnBookmarksClicked" />

                <Button Grid.Column="2" 
                        Text="Controls" 
                        BackgroundColor="Transparent" 
                        TextColor="#333" 
                        Clicked="OnControlsClicked" />
            </Grid>

            <!-- Loading Indicator -->
            <ActivityIndicator x:Name="LoadingIndicator"
                              IsVisible="False" 
                              IsRunning="False" 
                              Color="#007AFF" 
                              VerticalOptions="Center" 
                              HorizontalOptions="Center" />
        </Grid>
    </ContentPage.Content>
</ContentPage>
