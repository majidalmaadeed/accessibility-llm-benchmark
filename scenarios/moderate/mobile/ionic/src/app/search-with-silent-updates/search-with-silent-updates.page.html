<ion-header>
  <ion-toolbar>
    <ion-title>Search With Silent Updates</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content class="ion-padding">
  <div class="main-content">
    <h1>Search Interface</h1>
    <p>Search for content using the input field below. Suggestions will appear as you type.</p>
    <!-- Search Input Section -->
    <div class="search-section">
      <div class="input-wrapper">
        <ion-input
          #searchInput
          [(ngModel)]="query"
          placeholder="Type to search..."
          (ionInput)="handleInput()"
          (ionBlur)="onSearchBlur()"
          class="search-input">
        </ion-input>
        <ion-list *ngIf="showSuggestions && suggestions.length > 0" class="suggestions-list">
          <ion-item 
            *ngFor="let suggestion of suggestions; let i = index"
            (click)="handleSuggestionClick(suggestion)"
            [class.active]="i === activeSuggestionIndex"
            class="suggestion-item">
              <h3>{{ suggestion.title }}</h3>
              <p>{{ suggestion.category }} â€¢ {{ suggestion.author }}</p>
          </ion-item>
        </ion-list>
      </div>
      <ion-button
        (click)="handleSearch()"
        [disabled]="isLoading || !query.trim()"
        expand="block"
        class="search-button">
        <ion-spinner *ngIf="isLoading" name="crescent"></ion-spinner>
        <span *ngIf="!isLoading">Search</span>
        <span *ngIf="isLoading">Searching...</span>
      </ion-button>
    </div>
    <div class="results-section">
      <h2>Search Results</h2>
      <!-- Loading State -->
      <div *ngIf="isLoading" class="loading-state">
        <ion-spinner name="crescent"></ion-spinner>
        <p>Searching...</p>
      </div>
      <!-- Results Content -->
      <div *ngIf="!isLoading && results.length > 0" class="results-content">
        <p class="results-count">Found {{ results.length }} result{{ results.length !== 1 ? 's' : '' }}</p>
        <ion-list>
          <ion-item *ngFor="let result of results" class="result-item">
              <h3>{{ result.title }}</h3>
              <p>Category: {{ result.category }}</p>
              <p>Author: {{ result.author }}</p>
          </ion-item>
        </ion-list>
      </div>
      <!-- No Results State -->
      <div *ngIf="!isLoading && results.length === 0 && query" class="no-results">
        <p>No results found for "{{ query }}"</p>
      </div>
      <!-- Empty State -->
      <div *ngIf="!isLoading && results.length === 0 && !query" class="empty-state">
        <p>Enter a search term to find content</p>
      </div>
    </div>
  </div>
    <ion-card-header>
    </ion-card-header>
    <ion-card-content>
      <ul>
      </ul>
    </ion-card-content>
  </ion-card>
</ion-content>