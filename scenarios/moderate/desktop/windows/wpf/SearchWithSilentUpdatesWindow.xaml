<Window x:Class="AccessibilityApp.SearchWithSilentUpdatesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Search Interface"
        Height="900" Width="1000"
        Background="#F5F5F5"
        WindowStartupLocation="CenterScreen">
    
    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="20">
        <StackPanel>
            
            <!-- Main Content Card -->
            <Border Background="White" 
                    CornerRadius="8" 
                    Padding="30" 
                    Margin="0,0,0,20"
                    Effect="{StaticResource DropShadowEffect}">
                <StackPanel>
                    
                    <!-- Title -->
                    <TextBlock Text="Search Interface"
                               FontSize="24" 
                               FontWeight="Bold" 
                               Foreground="#333333"
                               Margin="0,0,0,16" />
                    
                    <!-- Description -->
                    <TextBlock Text="Search for content using the input field below. Suggestions will appear as you type."
                               FontSize="16" 
                               Foreground="#666666"
                               Margin="0,0,0,30" />
                    
                    <!-- Search Input Section -->
                    <StackPanel Margin="0,0,0,30">
                        <TextBlock Text="Search for content:"
                                   FontSize="18" 
                                   FontWeight="Bold" 
                                   Foreground="#333333"
                                   Margin="0,0,0,8" />
                        
                        <!-- Search Input with Suggestions -->
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            
                            <!-- Search Input -->
                            <TextBox x:Name="SearchInput"
                                     Grid.Row="0"
                                     Height="44"
                                     FontSize="16"
                                     Padding="12,8"
                                     BorderBrush="#DDDDDD"
                                     BorderThickness="2"
                                     TextChanged="OnSearchInputChanged"
                                     KeyDown="OnSearchInputKeyDown">
                                <TextBox.Style>
                                    <Style TargetType="TextBox">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="TextBox">
                                                    <Border Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            CornerRadius="4">
                                                        <ScrollViewer x:Name="PART_ContentHost" 
                                                                      Margin="{TemplateBinding Padding}"
                                                                      VerticalAlignment="Center" />
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </TextBox.Style>
                            </TextBox>
                            
                            <!-- Suggestions Dropdown - MISSING ARIA ATTRIBUTES -->
                            <ListBox x:Name="SuggestionsList"
                                     Grid.Row="1"
                                     Background="White"
                                     BorderBrush="#007BFF"
                                     BorderThickness="2"
                                     Margin="0,4,0,0"
                                     Visibility="Collapsed"
                                     SelectionChanged="OnSuggestionSelected"
                                     MaxHeight="200">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Margin="12,8">
                                            <TextBlock Text="{Binding Title}"
                                                       FontWeight="Bold"
                                                       FontSize="14"
                                                       Foreground="#333333" />
                                            <TextBlock Text="{Binding Category}"
                                                       FontSize="12"
                                                       Foreground="#666666">
                                                <TextBlock.Text>
                                                    <MultiBinding StringFormat="{}{0} â€¢ {1}">
                                                        <Binding Path="Category" />
                                                        <Binding Path="Author" />
                                                    </MultiBinding>
                                                </TextBlock.Text>
                                            </TextBlock>
                                        </StackPanel>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                                
                                <ListBox.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Setter Property="Background" Value="Transparent" />
                                        <Setter Property="BorderThickness" Value="0" />
                                        <Setter Property="Padding" Value="0" />
                                        <Setter Property="Margin" Value="0" />
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="#F8F9FA" />
                                            </Trigger>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="Background" Value="#E3F2FD" />
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </ListBox.ItemContainerStyle>
                            </ListBox>
                        </Grid>
                        
                        <!-- Search Button -->
                        <Button x:Name="SearchButton"
                                Content="Search"
                                Height="44"
                                FontSize="16"
                                FontWeight="Bold"
                                Background="#007BFF"
                                Foreground="White"
                                BorderThickness="0"
                                Margin="0,20,0,0"
                                Click="OnSearchButtonClicked"
                                IsEnabled="False">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                                                        CornerRadius="4"
                                                        Padding="{TemplateBinding Padding}">
                                                    <ContentPresenter HorizontalAlignment="Center"
                                                                      VerticalAlignment="Center" />
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>
                    </StackPanel>
                    
                    <!-- Results Section -->
                    <StackPanel>
                        <TextBlock Text="Search Results"
                                   FontSize="20" 
                                   FontWeight="Bold" 
                                   Foreground="#333333"
                                   Margin="0,0,0,16" />
                        
                        <!-- Loading State -->
                        <StackPanel x:Name="LoadingPanel"
                                    Visibility="Collapsed"
                                    HorizontalAlignment="Center"
                                    Margin="0,20">
                            <ProgressBar Width="200" Height="20" IsIndeterminate="True" />
                            <TextBlock Text="Searching..."
                                       FontSize="16"
                                       Foreground="#666666"
                                       HorizontalAlignment="Center"
                                       Margin="0,10,0,0" />
                        </StackPanel>
                        
                        <!-- Results Count -->
                        <TextBlock x:Name="ResultsCount"
                                   FontSize="14"
                                   Foreground="#666666"
                                   Margin="0,0,0,16"
                                   Visibility="Collapsed" />
                        
                        <!-- Results List -->
                        <ItemsControl x:Name="ResultsList"
                                      Visibility="Collapsed">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="#F8F9FA"
                                            BorderBrush="#DDDDDD"
                                            BorderThickness="1"
                                            CornerRadius="4"
                                            Margin="0,0,0,12"
                                            Padding="16">
                                        <StackPanel>
                                            <TextBlock Text="{Binding Title}"
                                                       FontSize="16" 
                                                       FontWeight="SemiBold" 
                                                       Foreground="#333333"
                                                       Margin="0,0,0,8" />
                                            <TextBlock Text="{Binding Category}"
                                                       FontSize="12" 
                                                       Foreground="#666666"
                                                       Margin="0,0,0,4">
                                                <TextBlock.Text>
                                                    <MultiBinding StringFormat="Category: {0}">
                                                        <Binding Path="Category" />
                                                    </MultiBinding>
                                                </TextBlock.Text>
                                            </TextBlock>
                                            <TextBlock Text="{Binding Author}"
                                                       FontSize="12" 
                                                       Foreground="#666666">
                                                <TextBlock.Text>
                                                    <MultiBinding StringFormat="Author: {0}">
                                                        <Binding Path="Author" />
                                                    </MultiBinding>
                                                </TextBlock.Text>
                                            </TextBlock>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        
                        <!-- No Results State -->
                        <StackPanel x:Name="NoResultsPanel"
                                    Visibility="Collapsed"
                                    HorizontalAlignment="Center"
                                    Margin="0,20">
                            <TextBlock x:Name="NoResultsText"
                                       FontSize="16"
                                       Foreground="#666666"
                                       HorizontalAlignment="Center" />
                        </StackPanel>
                        
                        <!-- Empty State -->
                        <StackPanel x:Name="EmptyPanel"
                                    HorizontalAlignment="Center"
                                    Margin="0,20">
                            <TextBlock Text="Enter a search term to find content"
                                       FontSize="16"
                                       Foreground="#666666"
                                       HorizontalAlignment="Center" />
                        </StackPanel>
                    </StackPanel>
                    
                </StackPanel>
            </Border>
            
            
        </StackPanel>
    </ScrollViewer>
    
    <Window.Resources>
        <DropShadowEffect x:Key="DropShadowEffect" 
                          Color="Black" 
                          BlurRadius="10" 
                          ShadowDepth="2" 
                          Opacity="0.1" />
    </Window.Resources>
    
</Window>