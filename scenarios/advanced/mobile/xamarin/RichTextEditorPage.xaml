<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="AccessibilityBenchmark.RichTextEditorPage"
             xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="Rich Text Editor"
             BackgroundColor="#F5F5F5">

    <ContentPage.Content>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Header -->
            <Grid Grid.Row="0" BackgroundColor="White" Padding="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <Label Grid.Column="0" 
                       Text="Rich Text Editor" 
                       FontSize="18" 
                       FontAttributes="Bold" 
                       VerticalOptions="Center" />

                <Button Grid.Column="1" 
                        Text="Save" 
                        BackgroundColor="#F0F0F0" 
                        TextColor="#007AFF" 
                        BorderRadius="8" 
                        Padding="12,8" 
                        Margin="0,0,8,0"
                        Clicked="OnSaveClicked" />

                <Button Grid.Column="2" 
                        Text="Export" 
                        BackgroundColor="#F0F0F0" 
                        TextColor="#007AFF" 
                        BorderRadius="8" 
                        Padding="12,8" 
                        Margin="0,0,8,0"
                        Clicked="OnExportClicked" />

                <Button Grid.Column="3" 
                        Text="Stats" 
                        BackgroundColor="#F0F0F0" 
                        TextColor="#007AFF" 
                        BorderRadius="8" 
                        Padding="12,8"
                        Clicked="OnStatsClicked" />
            </Grid>

            <!-- Toolbar -->
            <ScrollView Grid.Row="1" 
                        Orientation="Horizontal" 
                        BackgroundColor="White" 
                        Padding="8">
                <StackLayout Orientation="Horizontal" Spacing="8">
                    
                    <!-- Undo/Redo Group -->
                    <Button Text="â†¶" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#666" 
                            BorderRadius="6" 
                            WidthRequest="40" 
                            HeightRequest="40"
                            IsEnabled="{Binding IsUndoAvailable}"
                            Clicked="OnUndoClicked" />

                    <Button Text="â†·" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#666" 
                            BorderRadius="6" 
                            WidthRequest="40" 
                            HeightRequest="40"
                            IsEnabled="{Binding IsRedoAvailable}"
                            Clicked="OnRedoClicked" />

                    <BoxView WidthRequest="1" 
                             HeightRequest="32" 
                             BackgroundColor="#E0E0E0" 
                             VerticalOptions="Center" />

                    <!-- Formatting Group -->
                    <Button Text="B" 
                            BackgroundColor="{Binding BoldBackgroundColor}" 
                            TextColor="{Binding BoldTextColor}" 
                            BorderRadius="6" 
                            WidthRequest="40" 
                            HeightRequest="40"
                            FontAttributes="Bold"
                            Clicked="OnBoldClicked" />

                    <Button Text="I" 
                            BackgroundColor="{Binding ItalicBackgroundColor}" 
                            TextColor="{Binding ItalicTextColor}" 
                            BorderRadius="6" 
                            WidthRequest="40" 
                            HeightRequest="40"
                            FontAttributes="Italic"
                            Clicked="OnItalicClicked" />

                    <Button Text="U" 
                            BackgroundColor="{Binding UnderlineBackgroundColor}" 
                            TextColor="{Binding UnderlineTextColor}" 
                            BorderRadius="6" 
                            WidthRequest="40" 
                            HeightRequest="40"
                            Clicked="OnUnderlineClicked" />

                    <BoxView WidthRequest="1" 
                             HeightRequest="32" 
                             BackgroundColor="#E0E0E0" 
                             VerticalOptions="Center" />

                    <!-- Font Size Group -->
                    <Button Text="{Binding FontSize}" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#333" 
                            BorderRadius="6" 
                            WidthRequest="40" 
                            HeightRequest="40"
                            Clicked="OnFontSizeClicked" />

                    <Button BackgroundColor="{Binding TextColor}" 
                            BorderRadius="20" 
                            WidthRequest="20" 
                            HeightRequest="20"
                            Clicked="OnTextColorClicked" />

                    <Button BackgroundColor="{Binding BackgroundColor}" 
                            BorderRadius="20" 
                            WidthRequest="20" 
                            HeightRequest="20"
                            Clicked="OnBackgroundColorClicked" />

                    <BoxView WidthRequest="1" 
                             HeightRequest="32" 
                             BackgroundColor="#E0E0E0" 
                             VerticalOptions="Center" />

                    <!-- Alignment Group -->
                    <Button Text="L" 
                            BackgroundColor="{Binding LeftAlignBackgroundColor}" 
                            TextColor="{Binding LeftAlignTextColor}" 
                            BorderRadius="6" 
                            WidthRequest="40" 
                            HeightRequest="40"
                            Clicked="OnLeftAlignClicked" />

                    <Button Text="C" 
                            BackgroundColor="{Binding CenterAlignBackgroundColor}" 
                            TextColor="{Binding CenterAlignTextColor}" 
                            BorderRadius="6" 
                            WidthRequest="40" 
                            HeightRequest="40"
                            Clicked="OnCenterAlignClicked" />

                    <Button Text="R" 
                            BackgroundColor="{Binding RightAlignBackgroundColor}" 
                            TextColor="{Binding RightAlignTextColor}" 
                            BorderRadius="6" 
                            WidthRequest="40" 
                            HeightRequest="40"
                            Clicked="OnRightAlignClicked" />

                    <BoxView WidthRequest="1" 
                             HeightRequest="32" 
                             BackgroundColor="#E0E0E0" 
                             VerticalOptions="Center" />

                    <!-- Insert Group -->
                    <Button Text="+" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#333" 
                            BorderRadius="6" 
                            WidthRequest="40" 
                            HeightRequest="40"
                            Clicked="OnInsertClicked" />

                    <Button Text="ðŸ“Š" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#333" 
                            BorderRadius="6" 
                            WidthRequest="40" 
                            HeightRequest="40"
                            Clicked="OnStatsClicked" />

                </StackLayout>
            </ScrollView>

            <!-- Word Count Panel -->
            <Grid Grid.Row="2" 
                  IsVisible="{Binding ShowWordCount}" 
                  BackgroundColor="#F0F0F0" 
                  Padding="16,8">
                <Label Text="{Binding WordCountText}" 
                       HorizontalOptions="Center" 
                       FontSize="12" 
                       TextColor="#666" />
            </Grid>

            <!-- Editor -->
            <Grid Grid.Row="2" 
                  Margin="16" 
                  BackgroundColor="White" 
                  Padding="16">
                <Editor x:Name="Editor" 
                        Text="{Binding Content}" 
                        FontSize="{Binding FontSize}" 
                        TextColor="{Binding TextColor}" 
                        BackgroundColor="{Binding BackgroundColor}" 
                        Placeholder="Start typing your document..." 
                        AutoSize="TextChanges" />
            </Grid>

            <!-- Loading Indicator -->
            <ActivityIndicator IsVisible="{Binding IsLoading}" 
                              IsRunning="{Binding IsLoading}" 
                              Color="#007AFF" 
                              VerticalOptions="Center" 
                              HorizontalOptions="Center" />
        </Grid>
    </ContentPage.Content>
</ContentPage>
