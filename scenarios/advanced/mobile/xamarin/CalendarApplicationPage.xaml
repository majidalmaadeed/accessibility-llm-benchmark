<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="AccessibilityBenchmark.CalendarApplicationPage"
             xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="Calendar Application"
             BackgroundColor="#F5F5F5">

    <ContentPage.Content>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Header -->
            <Grid Grid.Row="0" BackgroundColor="White" Padding="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <Label Grid.Column="0" 
                       Text="Calendar" 
                       FontSize="24" 
                       FontAttributes="Bold" 
                       VerticalOptions="Center" />

                <Button Grid.Column="1" 
                        Text="Today" 
                        BackgroundColor="#F0F0F0" 
                        TextColor="#007AFF" 
                        BorderRadius="8" 
                        Padding="12,8" 
                        Margin="0,0,8,0"
                        Clicked="OnTodayClicked" />

                <Button Grid.Column="2" 
                        Text="+" 
                        BackgroundColor="#007AFF" 
                        TextColor="White" 
                        BorderRadius="20" 
                        WidthRequest="40" 
                        HeightRequest="40"
                        Clicked="OnCreateEventClicked" />
            </Grid>

            <!-- View Mode Selector -->
            <Grid Grid.Row="1" BackgroundColor="White" Padding="16,8">
                <StackLayout Orientation="Horizontal" HorizontalOptions="Center">
                    <Button Text="MONTH" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#666" 
                            BorderRadius="20" 
                            Padding="16,8" 
                            Margin="4"
                            Clicked="OnViewModeChanged" 
                            CommandParameter="month" />

                    <Button Text="WEEK" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#666" 
                            BorderRadius="20" 
                            Padding="16,8" 
                            Margin="4"
                            Clicked="OnViewModeChanged" 
                            CommandParameter="week" />

                    <Button Text="DAY" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#666" 
                            BorderRadius="20" 
                            Padding="16,8" 
                            Margin="4"
                            Clicked="OnViewModeChanged" 
                            CommandParameter="day" />
                </StackLayout>
            </Grid>

            <!-- Navigation -->
            <Grid Grid.Row="2" BackgroundColor="White" Padding="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <Button Grid.Column="0" 
                        Text="&lt;" 
                        BackgroundColor="Transparent" 
                        TextColor="#007AFF" 
                        FontSize="24" 
                        Clicked="OnPreviousClicked" />

                <Label Grid.Column="1" 
                       Text="{Binding CurrentDateText}" 
                       FontSize="18" 
                       FontAttributes="Bold" 
                       HorizontalOptions="Center" 
                       VerticalOptions="Center" />

                <Button Grid.Column="2" 
                        Text="&gt;" 
                        BackgroundColor="Transparent" 
                        TextColor="#007AFF" 
                        FontSize="24" 
                        Clicked="OnNextClicked" />
            </Grid>

            <!-- Calendar View -->
            <Grid Grid.Row="3" Padding="16">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!-- Week Days Header -->
                <Grid Grid.Row="0" BackgroundColor="#E0E0E0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <Label Grid.Column="0" Text="Sun" HorizontalOptions="Center" Padding="8" FontAttributes="Bold" />
                    <Label Grid.Column="1" Text="Mon" HorizontalOptions="Center" Padding="8" FontAttributes="Bold" />
                    <Label Grid.Column="2" Text="Tue" HorizontalOptions="Center" Padding="8" FontAttributes="Bold" />
                    <Label Grid.Column="3" Text="Wed" HorizontalOptions="Center" Padding="8" FontAttributes="Bold" />
                    <Label Grid.Column="4" Text="Thu" HorizontalOptions="Center" Padding="8" FontAttributes="Bold" />
                    <Label Grid.Column="5" Text="Fri" HorizontalOptions="Center" Padding="8" FontAttributes="Bold" />
                    <Label Grid.Column="6" Text="Sat" HorizontalOptions="Center" Padding="8" FontAttributes="Bold" />
                </Grid>

                <!-- Calendar Grid -->
                <CollectionView Grid.Row="1" 
                                ItemsSource="{Binding CalendarDays}" 
                                ItemsLayout="VerticalGrid, 7">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>

                                <Button Grid.Row="0" 
                                        Text="{Binding DayNumber}" 
                                        BackgroundColor="{Binding DayBackgroundColor}" 
                                        TextColor="{Binding DayTextColor}" 
                                        FontSize="16" 
                                        FontAttributes="{Binding DayFontAttributes}"
                                        BorderWidth="1" 
                                        BorderColor="#E0E0E0" 
                                        Clicked="OnDayClicked" 
                                        CommandParameter="{Binding Date}" />

                                <StackLayout Grid.Row="1" 
                                             Orientation="Horizontal" 
                                             HorizontalOptions="Center" 
                                             Spacing="2" 
                                             IsVisible="{Binding HasEvents}">
                                    <BoxView WidthRequest="6" 
                                             HeightRequest="6" 
                                             Color="{Binding EventColor}" 
                                             CornerRadius="3" />
                                    <BoxView WidthRequest="6" 
                                             HeightRequest="6" 
                                             Color="{Binding EventColor}" 
                                             CornerRadius="3" 
                                             IsVisible="{Binding HasMultipleEvents}" />
                                    <BoxView WidthRequest="6" 
                                             HeightRequest="6" 
                                             Color="{Binding EventColor}" 
                                             CornerRadius="3" 
                                             IsVisible="{Binding HasMultipleEvents}" />
                                </StackLayout>
                            </Grid>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </Grid>

            <!-- Loading Indicator -->
            <ActivityIndicator IsVisible="{Binding IsLoading}" 
                              IsRunning="{Binding IsLoading}" 
                              Color="#007AFF" 
                              VerticalOptions="Center" 
                              HorizontalOptions="Center" />
        </Grid>
    </ContentPage.Content>
</ContentPage>
