<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="AccessibilityBenchmark.ComplexSearchInterfacePage"
             xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="Search"
             BackgroundColor="#F5F5F5">

    <ContentPage.Content>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Search Bar -->
            <Grid Grid.Row="0" BackgroundColor="White" Padding="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <Entry Grid.Column="0" 
                       x:Name="SearchEntry"
                       Placeholder="Search for anything..." 
                       BackgroundColor="#F5F5F5" 
                       TextColor="#333" 
                       FontSize="16" 
                       Completed="OnSearchCompleted" />

                <Button Grid.Column="1" 
                        Text="Search" 
                        BackgroundColor="#007AFF" 
                        TextColor="White" 
                        BorderRadius="8" 
                        Padding="16,12" 
                        Margin="12,0,0,0"
                        Clicked="OnSearchClicked" />
            </Grid>

            <!-- Filters -->
            <ScrollView Grid.Row="1" 
                        Orientation="Horizontal" 
                        BackgroundColor="White" 
                        Padding="16,8">
                <StackLayout Orientation="Horizontal" Spacing="8">
                    
                    <Button Text="Filters" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#007AFF" 
                            BorderRadius="16" 
                            Padding="12,6" 
                            Clicked="OnFiltersClicked" />

                    <Button Text="Recent" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#666" 
                            BorderRadius="16" 
                            Padding="12,6" 
                            Clicked="OnFilterToggled" 
                            CommandParameter="recent" />

                    <Button Text="Large Files" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#666" 
                            BorderRadius="16" 
                            Padding="12,6" 
                            Clicked="OnFilterToggled" 
                            CommandParameter="large" />

                    <Button Text="Images Only" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#666" 
                            BorderRadius="16" 
                            Padding="12,6" 
                            Clicked="OnFilterToggled" 
                            CommandParameter="images" />

                    <Button Text="Videos Only" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#666" 
                            BorderRadius="16" 
                            Padding="12,6" 
                            Clicked="OnFilterToggled" 
                            CommandParameter="videos" />

                    <Button Text="Free" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#666" 
                            BorderRadius="16" 
                            Padding="12,6" 
                            Clicked="OnFilterToggled" 
                            CommandParameter="free" />

                </StackLayout>
            </ScrollView>

            <!-- Sort and View -->
            <Grid Grid.Row="2" BackgroundColor="White" Padding="16,8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <StackLayout Grid.Column="0" Orientation="Horizontal" VerticalOptions="Center">
                    <Label Text="Sort by: " FontSize="14" TextColor="#666" />
                    <Picker x:Name="SortPicker" 
                            Title="Select sort option" 
                            WidthRequest="120" 
                            SelectedIndexChanged="OnSortChanged">
                        <Picker.Items>
                            <x:String>Relevance</x:String>
                            <x:String>Date</x:String>
                            <x:String>Name</x:String>
                            <x:String>Size</x:String>
                            <x:String>Type</x:String>
                            <x:String>Rating</x:String>
                        </Picker.Items>
                    </Picker>
                </StackLayout>

                <StackLayout Grid.Column="1" Orientation="Horizontal" Spacing="4">
                    <Button Text="ðŸ“‹" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#666" 
                            BorderRadius="6" 
                            WidthRequest="32" 
                            HeightRequest="32" 
                            Clicked="OnViewModeChanged" 
                            CommandParameter="list" />

                    <Button Text="âŠž" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#666" 
                            BorderRadius="6" 
                            WidthRequest="32" 
                            HeightRequest="32" 
                            Clicked="OnViewModeChanged" 
                            CommandParameter="grid" />

                    <Button Text="â˜°" 
                            BackgroundColor="#F0F0F0" 
                            TextColor="#666" 
                            BorderRadius="6" 
                            WidthRequest="32" 
                            HeightRequest="32" 
                            Clicked="OnViewModeChanged" 
                            CommandParameter="compact" />
                </StackLayout>
            </Grid>

            <!-- Results -->
            <Grid Grid.Row="3">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!-- Loading Indicator -->
                <ActivityIndicator Grid.Row="0" 
                                  x:Name="LoadingIndicator"
                                  IsVisible="False" 
                                  IsRunning="False" 
                                  Color="#007AFF" 
                                  VerticalOptions="Center" 
                                  HorizontalOptions="Center" />

                <!-- Results List -->
                <CollectionView Grid.Row="0" 
                                x:Name="ResultsCollectionView" 
                                ItemsSource="{Binding SearchResults}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Grid Padding="16,8" BackgroundColor="White" Margin="0,0,0,8">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <Frame Grid.Column="0" 
                                       BackgroundColor="#F0F0F0" 
                                       CornerRadius="24" 
                                       WidthRequest="48" 
                                       HeightRequest="48" 
                                       HorizontalOptions="Center" 
                                       VerticalOptions="Center">
                                    <Label Text="{Binding Image}" 
                                           FontSize="24" 
                                           HorizontalOptions="Center" 
                                           VerticalOptions="Center" />
                                </Frame>

                                <StackLayout Grid.Column="1" 
                                             Margin="12,0" 
                                             VerticalOptions="Center">
                                    <Label Text="{Binding Title}" 
                                           FontSize="16" 
                                           FontAttributes="Bold" 
                                           TextColor="#333" 
                                           LineBreakMode="TailTruncation" />
                                    
                                    <Label Text="{Binding Description}" 
                                           FontSize="14" 
                                           TextColor="#666" 
                                           LineBreakMode="TailTruncation" 
                                           MaxLines="2" />
                                    
                                    <StackLayout Orientation="Horizontal" 
                                                 Spacing="16" 
                                                 Margin="0,4,0,0">
                                        <StackLayout Orientation="Horizontal" Spacing="4">
                                            <Label Text="ðŸ“" FontSize="12" TextColor="#666" />
                                            <Label Text="{Binding Category}" 
                                                   FontSize="12" 
                                                   TextColor="#666" />
                                        </StackLayout>
                                        
                                        <StackLayout Orientation="Horizontal" Spacing="4">
                                            <Label Text="ðŸ•’" FontSize="12" TextColor="#666" />
                                            <Label Text="{Binding Date}" 
                                                   FontSize="12" 
                                                   TextColor="#666" />
                                        </StackLayout>
                                        
                                        <StackLayout Orientation="Horizontal" Spacing="4">
                                            <Label Text="â­" FontSize="12" TextColor="#FFD700" />
                                            <Label Text="{Binding Rating}" 
                                                   FontSize="12" 
                                                   TextColor="#666" />
                                        </StackLayout>
                                        
                                        <StackLayout Orientation="Horizontal" Spacing="4">
                                            <Label Text="ðŸ“„" FontSize="12" TextColor="#666" />
                                            <Label Text="{Binding Size}" 
                                                   FontSize="12" 
                                                   TextColor="#666" />
                                        </StackLayout>
                                    </StackLayout>
                                    
                                    <Label Text="{Binding PriceText}" 
                                           FontSize="16" 
                                           FontAttributes="Bold" 
                                           TextColor="#007AFF" 
                                           IsVisible="{Binding HasPrice}" />
                                </StackLayout>

                                <Label Grid.Column="2" 
                                       Text="â€º" 
                                       FontSize="20" 
                                       TextColor="#CCC" 
                                       VerticalOptions="Center" />
                            </Grid>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

                <!-- Empty State -->
                <StackLayout Grid.Row="0" 
                             x:Name="EmptyStateLayout" 
                             IsVisible="False" 
                             VerticalOptions="Center" 
                             HorizontalOptions="Center" 
                             Spacing="16">
                    <Label Text="ðŸ”" FontSize="64" TextColor="#CCC" HorizontalOptions="Center" />
                    <Label Text="No results found" 
                           FontSize="20" 
                           FontAttributes="Bold" 
                           TextColor="#333" 
                           HorizontalOptions="Center" />
                    <Label Text="Try adjusting your search terms or filters" 
                           FontSize="14" 
                           TextColor="#666" 
                           HorizontalOptions="Center" 
                           HorizontalTextAlignment="Center" />
                    <Button Text="Clear all filters" 
                            BackgroundColor="#007AFF" 
                            TextColor="White" 
                            BorderRadius="8" 
                            Padding="24,12" 
                            Clicked="OnClearFiltersClicked" />
                </StackLayout>
            </Grid>
        </Grid>
    </ContentPage.Content>
</ContentPage>
